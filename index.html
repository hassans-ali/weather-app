<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1163/1163624.png" type="image/png">
<title>Weather App</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">  <style>
    *{
      padding: 0;
      margin: 0;
    }
  </style>
</head>
<body style="background-color: lightblue;">
  <form action="" class="mb-3">

    <div class="input-group">
           <img src="https://uxwing.com/wp-content/themes/uxwing/download/weather/cloud-color-icon.png" class="d-inline" width="50" alt="">

  <input type="text" class="form-control inp ">
  <button class="btn btn-info">forecast</button>
  <button class="btn night" onclick="(e)=>{e.preventDefault()}"><img src="https://uxwing.com/wp-content/themes/uxwing/download/weather/sun-warm-icon.png" class="night-mode" alt="" width="20px" srcset=""></button>
  </div>
  </form>
  <div class="row cards container-fluid p-3">
    
    
  </div>
  <script>
    const btn=document.querySelector('.btn');
    const apikey='1039c2abd34762bb9290af789db4909e';
    const inp=document.querySelector('.inp');
    btn.addEventListener('click',(e)=>{
      e.preventDefault()
    const country=inp.value;
   let js;
   fetch('https://weather64.github.io/weather-app/apikey.json').then(data=>data.json()).then(json=>{js=json})

    fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${country}&appid=${js}&units=metric`).then((res)=>res.json()).then((json)=>{
   
  
      const js=json;
const cards=document.querySelector('.cards');
cards.innerHTML='';
if(js.cod==404){
  cards.innerHTML='<h1 style="color:red">city not found</h1>';
}else if(js.cod==400){
  cards.innerHTML='<h1 style="color:red">empty</h1>';
}
  for(i=0;i<js.list.length;i++){
    
    // if(js.cod==404){
    //   cards.innerHTML=`<h1>${js.message}</h1>`
    // }
    
    
        const dateTime = js.list[i].dt_txt; 
  cards.innerHTML+=`

    <div class=" d-flex flex-column col-md-3" style="border: 2px solid black; border-radius: 20px;">
        <div class="d-flex flex-row justify-content-between">
            <span>${js.city.name}</span>
            <span>${dateTime}</span>
        </div>
         <div class="d-flex flex-column text-center"><h1>${js.list[i].main.temp}<sup>o</sup>C</h1><span>${js.list[i].weather[0].main}</span></div>
          <div class="d-flex flex-row justify-content-between">
            <div class="d-flex flex-column ">
                <span><img src="https://uxwing.com/wp-content/themes/uxwing/download/weather/wind-icon.png" style="width:20px"  alt="">${js.list[i].wind.speed}</span>
                <span><img src="https://cdn-icons-png.flaticon.com/512/2299/2299296.png" style="width:20px"  alt="">${js.list[i].main.pressure}</span>
                <span><img src="https://cdn-icons-png.flaticon.com/512/8073/8073854.png" style="width:20px"  alt="">${js.city.population}</span>

            </div>
            <img src="http://openweathermap.org/img/wn/${js.list[i].weather[0].icon}@2x.png" style='width:100px'  data-toggle="tooltip" data-placement="top" title='${js.list[i].weather[0].description}' class="card-img-top" alt="">
          </div>
       
    </div>
    `;
    
  
  }})
    
    
  }
  )
  const night=document.querySelector('.night');
     night.addEventListener('click',(e)=>{
        let nightMode=document.querySelector('.night-mode')
     
      e.preventDefault();
    nightMode=nightMode.getAttribute('src');
      if(nightMode=='https://uxwing.com/wp-content/themes/uxwing/download/weather/sun-warm-icon.png'){
        const body=document.querySelector('body')
      night.innerHTML='<img src="https://uxwing.com/wp-content/themes/uxwing/download/nature-and-environment/moon-icon.png" class="night-mode" width="20px" alt=""> '
      body.style.backgroundColor='grey'
    
      inp.style.backgroundColor='grey'
      
      }else{
          const body=document.querySelector('body');
                body.style.backgroundColor='lightBlue'

          night.innerHTML='<img src="https://uxwing.com/wp-content/themes/uxwing/download/weather/sun-warm-icon.png" width="20px" class="night-mode" alt=""> '
      }
     });
  
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>
